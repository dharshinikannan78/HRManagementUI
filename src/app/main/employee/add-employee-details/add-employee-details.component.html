<div class="container">
    <div class="step-wizard mt-3 mb-3">
        <ul class="step-wizard-list p-0">
            <li class="step-wizard-item  " [class.current-item]="step==1">
                <span class="progress-count">1</span>
                <span class="progress-label">Basic Details</span>
            </li>
            <li class="step-wizard-item" [class.current-item]="step==2">
                <span class="progress-count">2</span>
                <span class="progress-label">Contact Details</span>
            </li>
            <li class="step-wizard-item" [class.current-item]="step==3">
                <span class="progress-count">3</span>
                <span class="progress-label">Education Details</span>
            </li>
            <li class="step-wizard-item" [class.current-item]="step==4">
                <span class="progress-count">4</span>
                <span class="progress-label">Work Details</span>
            </li>
        </ul>
    </div>
</div>
<div class="container">
    <form class="add-form" (ngSubmit)="submit(employeeDetail.value)" [formGroup]="employeeDetail">
        <div class="widhtTest">
            <div [ngClass]="step == 1? '': 'd-none'" id="step1" class="row">
                <h4>Basic Details</h4>
                <div class="form-group col-md-6">
                    <label class=" form-label">First Name</label>
                    <input type="text" class="form-control" formControlName="firstName">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['firstName'].valid && 
                employeeDetail.controls['firstName']?.touched"> <b>First Name</b> is required *</span>
                </div>
                <div class="form-group col-md-6">
                    <label class=" form-label">Last Name</label>
                    <input type="text" class="form-control" formControlName="lastName">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['lastName'].valid && 
                employeeDetail.controls['lastName']?.touched"> <b>Last Name </b> is required *</span>
                </div>

                <div class="form-group col-md-12">
                    <label class=" form-label">Date Of Birth</label>
                    <input type="date" class="form-control" formControlName="dob">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['dob'].valid && 
                employeeDetail.controls['dob']?.touched"> <b>Dob</b> is required *</span>
                </div>
                <div class="form-group col-md-12">
                    <label class=" form-label mt-3">Gender</label>
                    <select class="form-select" class="form-control" formControlName="gender">
                        <option disabled selected value> -- select an option -- </option>
                        <option value="Female">Female</option>
                        <option value="Male">Male</option>
                    </select>
                    <span class="text-danger" *ngIf="!employeeDetail.controls['gender'].valid && 
employeeDetail.controls['gender']?.touched"> <b>Gender</b> is required *</span>
                </div>
                <div class="form-group col-12">
                    <div class="form-check">
                        <input class="form-check-input" (change)="createLoginCheck()" type="checkbox"
                            id="flexCheckChecked">
                        <label class="form-check-label" for="flexCheckChecked">
                            Create Login For this User
                        </label>
                    </div>
                </div>
                <div *ngIf="createLogin" class="form-group">
                    <label class=" form-label">Role</label>
                    <select class="form-select" (change)="loginAccess()" [(ngModel)]="loginAcess"
                        [ngModelOptions]="{standalone: true}" class="form-control">
                        <option disabled selected value> -- select an option -- </option>
                        <option value="Admin">Admin</option>
                        <option value="Manager">Manager</option>
                        <option value="TeamLead">TeamLead</option>
                        <option value="Employee">Employee</option>
                    </select>
                    <span class="text-danger" *ngIf="!employeeDetail.controls['gender'].valid && 
                            employeeDetail.controls['gender']?.touched"> <b>Role</b> is required *</span>
                </div>
            </div>
            <div [ngClass]="step == 2? '': 'd-none'" id="step2" class="row">
                <h4>Contact Details</h4>
                <div class="form-group col-md-12">
                    <label class=" form-label">Email Id</label>
                    <input type="text" (input)="validateEmail($event)" class="form-control" formControlName="emailId">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['emailId'].valid && 
                employeeDetail.controls['emailId']?.touched"> <b>Email Id</b> is required *</span>
                    <span class="text-danger" *ngIf="isEmailExist">Email Already Exists</span>
                </div>
                <div class="form-group col-md-12">
                    <label class=" form-label">Mobile Number</label>
                    <input type="text" class="form-control" formControlName="number">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['number'].valid && 
                    employeeDetail.controls['number']?.touched"> <b>Number</b> is required *</span>
                </div>
                <div class="form-group col-md-12">
                    <label class=" form-label">Address</label>
                    <textarea class="form-control" formControlName="address"></textarea>
                    <span class="text-danger" *ngIf="!employeeDetail.controls['address'].valid && 
                            employeeDetail.controls['address']?.touched"> <b>Address</b> is required *</span>
                </div>
                <div class="form-group col-md-12">
                    <label class=" form-label">Employee Refernce Number</label>
                    <input type="text" class="form-control" formControlName="employeeReferenceNo">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['employeeReferenceNo'].valid && 
                    employeeDetail.controls['employeeReferenceNo']?.touched"> <b>Employee Refernce Number</b> is
                        required *</span>
                </div>
                <div *ngIf="createLogin && loginAcess != 'Admin'" class="form-group">
                    <label class="form-label">Reporting Person</label>
                    <select [(ngModel)]="repId" [ngModelOptions]="{standalone: true}" class="form-select"
                        class="form-control">
                        <option disabled selected value> -- select an option -- </option>
                        <option *ngFor="let data of reportingPerson" [value]="data.employeeId">{{data.firstName}}
                            {{data.lastName}}</option>
                    </select>
                </div>
            </div>
            <div [ngClass]="step == 3? '': 'd-none'" id="step3" class="row">
                <h4>Education Details</h4>

                <div class="row">
                    <div class="form-group col-md-6">
                        <label class=" form-label">Qualification</label>
                        <input type="text" class="form-control" formControlName="qualification">
                        <span class="text-danger" *ngIf="!employeeDetail.controls['qualification'].valid && 
                    employeeDetail.controls['qualification']?.touched"> <b>Qualification</b> is required *</span>
                    </div>
                    <div class="form-group col-md-6">
                        <label class=" form-label">College OR University</label>
                        <input type="text" class="form-control" formControlName="college">
                        <span class="text-danger" *ngIf="!employeeDetail.controls['college'].valid && 
                        employeeDetail.controls['college']?.touched"> <b>College/University</b> is required *</span>
                    </div>

                    <div class="form-group col-md-6">
                        <label class=" form-label">Year Of Passing</label>
                        <input type="date" class="form-control" formControlName="passedOut">
                        <span class="text-danger" *ngIf="!employeeDetail.controls['passedOut'].valid && 
            employeeDetail.controls['passedOut']?.touched"> <b>Year Of Passing</b> is required *</span>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <label class=" form-label">Skills</label>
                        <input type="text" class="form-control" formControlName="skills">
                        <span class="text-danger" *ngIf="!employeeDetail.controls['skills'].valid && 
        employeeDetail.controls['skills']?.touched"> <b>Skills</b> is required *</span>
                    </div>
                </div>
            </div>
            <div [ngClass]="step == 4? '': 'd-none'" class="row" id="step4">
                <h4>Work Details</h4>
                <div class="form-group col-md-6">
                    <label class=" form-label">Designation</label>
                    <input type="text" class="form-control" formControlName="designation">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['designation'].valid && 
                        employeeDetail.controls['designation']?.touched"> <b>Designation</b> is required *</span>
                </div>

                <div class="form-group col-md-6">
                    <label class=" form-label">Joining Date</label>
                    <input type="date" class="form-control" formControlName="joiningDate">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['joiningDate'].valid && 
                        employeeDetail.controls['joiningDate']?.touched"> <b>Joining Date</b> is required *</span>
                </div>
                <div class="form-group col-md-6">
                    <label class=" form-label">Work Mode</label>
                    <select class="form-select" class="form-control" formControlName="workMode">
                        <option disabled selected value> -- select an option -- </option>
                        <option value="Part Time">Part Time</option>
                        <option value="Full Time">Full Time</option>
                    </select>
                    <span class="text-danger" *ngIf="!employeeDetail.controls['workMode'].valid && 
                            employeeDetail.controls['workMode']?.touched"> <b>WorkMode</b> is required *</span>
                </div>
                <div class="form-group col-md-6">
                    <label class=" form-label">Team Name</label>
                    <select class="form-select" class="form-control" formControlName="teamName">
                        <option disabled selected value> -- select an option -- </option>
                        <option value="XML">XML</option>
                        <option value="Conversion">Conversion</option>
                        <option value="Software">Software</option>
                        <option value="E-Pub">E-Pub</option>
                        <option value="Table">Table</option>
                        <option value="Court Form">Court Form</option>
                        <option value="Business development">Business development</option>
                    </select>
                    <span class="text-danger" *ngIf="!employeeDetail.controls['teamName'].valid && 
        employeeDetail.controls['teamName']?.touched"> <b>TeamName</b> is required *</span>
                </div>
                <div class="form-group col-md-12">
                    <label class="form-label">Resume</label>
                    <input type="file" class="input-box form-control" #resume formControlName="filesResume"
                        placeholder="choose the photo" (change)="uploadcandidateFile(resume.files,'resume')">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['filesResume'].valid && 
                            employeeDetail.controls['filesResume']?.touched"> <b>FilesResume</b> is required *</span>
                </div>
                <div class="form-group col-md-6">
                    <label class="form-label">Image</label>
                    <input type="file" class="input-box form-control" #image formControlName="filesResume"
                        placeholder="choose the photo" (change)="uploadcandidateFile(image.files,'image')">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['filesResume'].valid && 
                            employeeDetail.controls['filesResume']?.touched"> <b>FilesResume</b> is required *</span>
                </div>
                <div class="form-group col-md-6">
                    <label class="form-label">Certificate</label>
                    <input type="file" class="input-box form-control" #certificate formControlName="filesResume"
                        placeholder="choose the photo" (change)="uploadcandidateFile(certificate.files,'other')">
                    <span class="text-danger" *ngIf="!employeeDetail.controls['filesResume'].valid && 
                            employeeDetail.controls['filesResume']?.touched"> <b>FilesResume</b> is required *</span>
                </div>
            </div>
            <div class="modal-footer mt-5">
                <button type="button" class="submitButton" style="margin-right: 1rem; text-align: center !important;"
                    *ngIf="step!=1" (click)="prev()"><i class="fa-solid fa-chevron-left"></i> Prev</button>
                <button type="button" class="submitButton" *ngIf="step!=4 " (click)=" next()">Next <i
                        class="fa-solid fa-chevron-right"></i></button>
                <button type="submit" class="submitButton" *ngIf="step==4">Finish <i
                        class="fa-solid fa-circle-check"></i></button>
            </div>
        </div>
    </form>
</div>